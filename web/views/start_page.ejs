<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../stylesheet/loginpage.css">

    <title> Dynamic DOM Elements </title>


</head>
<body>


<div style="width:100%;height: 30em; background-color: #fff2a8" class="background">

    <h1 style="color:antiquewhite; position:absolute;
    left:50%;
    top:10%;
    transform: translate(-50%,-50%);
    font-size: 130px;
">avi</h1>
</div>


<div id="DynamicContent">
    gghg
</div>

</body>
<script>
    var oContent = document.getElementById('DynamicContent');
    //url pt pagina care furnizeaza asta
  //  var cURL     = 'http://localhost:3000/start'

    oContent.innerText='astrid';

   // oContent.innerText=;

    legatura();
    //console.log();


    ///facem trimitere la baza de date -tabela: posts si extragem ultimele 10 postari si le afisam



    async function legatura() {

        ///mereu stergem tot ce era
        oContent.innerHTML="";

        //GET request- dorim optinerea posturilor din tabela
        var ok = await fetch("http://localhost:3000/api/start")
            .catch(error => console.log('error', error));


        console.log(ok);
        ok.json().then(x=> {
            let obj = x.data.rezultat;

            let description_div=document.createElement("div");
            let description_head=document.createElement("h3");
            description_div.style.background="blue";
            description_div.style.width="70em";
            description_div.style.position="relative";
            description_div.style.font="";
            description_head.innerText="Car accidents occur every day in the United States.\n" +
                "Whether it is the drivers, the authorities, the pedestrians or the simple escapes of the senses, the accidents continue to take place with an alarming rate.\n" +
                "In order to learn from the mistakes of others, to study human behaviour or to satisfy simple morbid curiosities,\n" +
                " we present to you the AVI application - here to provide you with statistics, raw data, maps, a whole variety of methods to view all your interests.";


            description_div.appendChild(description_head);

            let div=document.createElement("div");
            div.style.background="blue";
            div.style.width="700px";
            div.style.position="relative";

            let welcome_div=document.createElement("div");
            let welcome_head=document.createElement("h1");


            welcome_head.innerText="Welcome";
            welcome_div.appendChild(welcome_head);
            welcome_div.padding="10px";
            welcome_head.padding="8px";


            let div_img1=document.createElement("div");
            let img1=document.createElement("img");
            img1.src="./public/images/7.png";

            div_img1.appendChild(img1);

            oContent.appendChild(description_div);
            oContent.appendChild(welcome_div);
            oContent.appendChild(div);
            oContent.appendChild(div_img1);


            for(let post of obj)
            {
                console.log(post);

                let paragraph=document.createElement("p");
                paragraph.innerText=post;

                paragraph.style.padding="7px";
                paragraph.style.font="18px";
               // paragraph.style.margin="3px";
                let paragraph_div=document.createElement("div");
                paragraph_div.style.background="#FAEBD7";
                paragraph_div.style.border="solid 2px #FFFFE0";
                paragraph_div.style.borderRadius="10px";
                paragraph_div.style.paddingTop="5px";

                paragraph_div.appendChild(paragraph);
                div.appendChild(paragraph_div);
            }



        });
        //console.log(ok.success);
       // return ok.ok;
    }







</script>
</html>